<!DOCTYPE html>
<html>
<!-- Rubik's cube simulation:Model: Represent as subset of permutations of 9*6=54 elements(generated by twists of the 6 faces)View: For each of 6 faces, draw 9 sub-faces. (Future: 3d view?) Controller: Left or right click faces to turn. (Permutes the model)-->
<body>
<canvas id='myCanvas' width='400' height='300'
style='border:1px solid #000000;'>ERROR
</canvas>
<p>
Click a face to twist it.
</body>

<script>
<!-- Model -->
function Face(color_id){  <!-- face.subface['edges'][0] -->
  this.subface = {'edges': new Array(4),
  				  'corners': new Array(4)};
  for (let i=0; i<4; i++){
    this.subface['edges'][i] = color_id;
    this.subface['corners'][i] = color_id;
  }
}
function Configuration(){
    <!-- Properties -->
    const F=0, U=1, R=2, D=3, L=4, B=5;
    <!-- hard coding the parameters for rotations-->
    let rotations = [[U, R, D, L],
    				 [B, R, F, L],
    				 [U, B, D, F],
    				 [F, R, B, L],
    				 [U, F, D, B],
    				 [U, L, D, R]];
    let base_diff = [[2,3,0,1],
    				 [0,0,0,0],
    				 [1,3,1,1],
    				 [2,2,2,2],
    				 [3,3,3,1],
    				 [0,3,2,1]];
	this.faces = {};
	for (let i=0; i<6; i++){
	  this.faces[i]=new Face(i);
	}

    <!-- Methods -->
	this.rotate = function(face_id){
	  <!--alert(face_id);-->
      <!--5 4-cycles-->
      var r=rotations[face_id]; <!-- array(4) -->
      var bd=base_diff[face_id];
      for (let type of ['edges','corners']){
        block=this.faces[face_id].subface[type];
        [block[0],block[1],block[2],block[3]]= [block[1],block[2],block[3],block[0]];
        var arr=[];
		for (let j of [0,1,2,3]){<!--just to separate things up a bit-->
		  arr.push(this.faces[r[j]].subface[type]);
		}<!--e.g.  arr = [ [0,0,0,0],[2,2,2,2],[..],[..] ]-->
		<!-- the 4-cycle -->
		[arr[0][bd[0]],arr[1][bd[1]],arr[2][bd[2]],arr[3][bd[3]]]=[arr[1][bd[1]],arr[2][bd[2]],arr[3][bd[3]],arr[0][bd[0]]];
        if (type=='corners'){
          [arr[0][(1+bd[0])%4],arr[1][(1+bd[1])%4],arr[2][(1+bd[2])%4],arr[3][(1+bd[3])%4]]=[arr[1][(1+bd[1])%4],arr[2][(1+bd[2])%4],arr[3][(1+bd[3])%4],arr[0][(1+bd[0])%4]];
        }
      }
	};
}

<!-- Controller -->
var size=25;
var bigsize=size*3+6 <!-- FURDLB -->
var face_xy=[[bigsize,bigsize], [bigsize,0], [2*bigsize,bigsize], [bigsize,2*bigsize], [0,bigsize], [3*bigsize,bigsize]];

var conf = new Configuration();
var canvas = document.getElementById('myCanvas');
canvas.addEventListener("click", clickCanvas);

function clickCanvas(event){
  var x=event.clientX, y=event.clientY;
  <!--alert( x +"," + y);-->
  for (var i=0; i<6; i++){
    <!-- If face i was clicked then rotate face i-->
    if (x>face_xy[i][0]+15 && x<face_xy[i][0]+15+bigsize && y>face_xy[i][1]+15 && y<face_xy[i][1]+15+bigsize){
      conf.rotate(i);
    }
  }
  drawAll();
}

<!-- View -->
var colors = ['red', 'orange', 'yellow', 'green', 'blue', 'gray'];
var ctx = canvas.getContext('2d');


function drawFace(face_id, x, y){ <!-- Draw face at x,y -->
  let xy={'edges':[[size+1,0],[2*(size+1),size+1],[size+1,2*(size+1)],[0,size+1]],
          'corners': [[0,0],[2*(size+1),0],[2*(size+1),2*(size+1)],[0,2*(size+1)]]};
  for (let type of ['edges','corners']){
    for (let i=0; i<4; i++){
      color_id=conf.faces[face_id].subface[type][i];
      ctx.fillStyle = colors[color_id];
      ctx.fillRect(x+xy[type][i][0],y+xy[type][i][1],size,size);
    }
  }
  ctx.fillStyle = colors[face_id];
  ctx.fillRect(x+size+1,y+size+1,size,size);
}

function drawAll(){
  ctx.clearRect(0,0,400,300);
  for (let k=0; k<6; k++){
    drawFace(k, 10+face_xy[k][0], 10+face_xy[k][1]);
  }
}

drawAll();
</script>
</html>
